RTPay는 모바일앱의 푸시알림을 통한 무통장 입금조회를 실시간으로 확인할 수 있도록 서비스해 드리고 있습니다.
은행의 입금알림앱이 변경되거나 업데이트 되더라도 RTPay서비스에는 영향을 끼치지 않습니다.
단, 은행의 입금알림앱이 정상적으로 푸시알림을 수신하고 있어야합니다.
카카오뱅크를 제외하고는 개통되지 않은 공기계에서도 RTPay서비스는 정상적으로 이용 가능하십니다.

php의 사용함수는 extension_loaded, http_build_query 두 함수를 사용하였음으로 php5이상에서는 정상동작합니다.
만약 그 하위버전을 사용하신다면 rtpay.class.php 에서 위 두 함수의 사용을 다른 방식으로 대체하시면 사용이 가능하십니다.


1. 기본환경
   PHP의 Curl 사용이 가능해야합니다.
   통신시 데이터는 json을 이용합니다.

2. 첨부파일
   rtpay.class.php : RTPay 클래스 파일
   checkpay.php    : RTPay 앱의 전송경로 설정시 이 파일의 URL을 넣으시면 됩니다.

3. 키설정
   $RTPay->RTP_KEY 값으로 메일에 기록된 키값을 넣으시면 됩니다.

4. 리턴코드값 ($retRTP->RCODE)
   200 : 정상적으로 데이터 전송과 복호화가 완료되었을 경우
   300 : php의 Curl이 정상적으로 동작하지 않을 경우
   400 : 인증키값(RTP_KEY) 오류
   500 : 앱 사용기간이 만료되었을 경우
   600 : 데이터 변환 오류

5. 앱으로 최종 리턴해야할 값 (checkpay.php 파일에서 $resultArray['PCHK'])
   OK : 내부 입금데이터와 비교하여 매칭이 이루어졌을 경우
   NO : 내부 입금데이터와 비교하였으나 매칭 데이터가 없거나 1개 이상일 경우.

6. 자동경로 설정
   키설정까지 끝난 후 checkpay.php를 브라우져에서 도메인 경로까지 포함하여 한번 호출하여 주면 앱의 전송경로가 자동으로 설정됩니다.

7.[중요]RTPay앱을 설치하신 모바일기기의 설정에서 전원절전 모드를 사용하지 않음으로 하시거나, 
설정화면의 우측상단 검색에서 "배터리 사용량 최적화"를 검색하신 후 해당 메뉴로 이동하셔서 푸시알림 은행앱의 배터리 최적화를 비활성화 해주세요.
안드로이드9 이상에서는 베터리 최적화가 동작되면 일정시간 후 푸시알림도 오지 않게 됩니다.